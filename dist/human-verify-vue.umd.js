(function(b,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(b=typeof globalThis<"u"?globalThis:b||self,e(b["human-verify-vue"]={},b.Vue))})(this,(function(b,e){"use strict";const w={class:"p-4 text-center"},S={class:"flex justify-center mb-6 bg-gray-50 p-4 rounded-lg border-2 border-dashed border-gray-300"},V={key:0,class:"space-y-3"},v={key:1,class:"space-y-3"},N={__name:"ImageGame",props:["onResult"],setup(y){const f=y,r=e.ref(null),c=e.ref(""),s=e.ref(""),h=e.ref(""),i=e.ref(!1),d=e.ref(""),k=()=>Math.floor(Math.random()*9e3)+1e3,_=()=>{const t=r.value.getContext("2d"),n=r.value.width,u=r.value.height,E=t.createLinearGradient(0,0,n,u);E.addColorStop(0,"#f0f4f8"),E.addColorStop(1,"#e0e8f0"),t.fillStyle=E,t.fillRect(0,0,n,u);for(let l=0;l<8;l++)t.strokeStyle=`rgba(150, 150, 150, ${Math.random()*.3})`,t.lineWidth=Math.random()*2+1,t.beginPath(),t.moveTo(Math.random()*n,Math.random()*u),t.lineTo(Math.random()*n,Math.random()*u),t.stroke();for(let l=0;l<30;l++)t.fillStyle=`rgba(100, 100, 100, ${Math.random()*.5})`,t.beginPath(),t.arc(Math.random()*n,Math.random()*u,Math.random()*1.5+.5,0,Math.PI*2),t.fill();const x=d.value.toString();t.font="bold 56px Arial",t.textBaseline="middle";const m=n/(x.length+1);for(let l=0;l<x.length;l++){t.save();const o=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6"];t.fillStyle=o[l%o.length];const p=m*(l+1)+(Math.random()-.5)*10,a=u/2+(Math.random()-.5)*8;t.translate(p,a),t.rotate((Math.random()-.5)*.3),t.scale(1+(Math.random()-.5)*.1,1+(Math.random()-.5)*.1),t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillText(x[l],2,2),t.fillStyle=o[l%o.length],t.fillText(x[l],0,0),t.restore()}t.strokeStyle="#999",t.lineWidth=2,t.strokeRect(0,0,n,u)},C=()=>{d.value=k(),c.value="",s.value="",i.value=!1,_()},M=()=>{if(!c.value.trim()){s.value="❌ Please enter the numbers",h.value="text-red-600";return}c.value.trim()===d.value.toString()?(i.value=!0,s.value="",setTimeout(()=>f.onResult(!0),1500)):(s.value="❌ Incorrect! Try again.",h.value="text-red-600",c.value="",setTimeout(C,500))};return e.onMounted(()=>{C()}),(t,n)=>(e.openBlock(),e.createElementBlock("div",w,[n[2]||(n[2]=e.createElementVNode("h2",{class:"text-lg font-semibold mb-4"},"🖼️ Image Verification",-1)),n[3]||(n[3]=e.createElementVNode("p",{class:"text-sm text-gray-600 mb-4"},"Read the numbers from the image and enter them below",-1)),e.createElementVNode("div",S,[e.createElementVNode("canvas",{ref_key:"canvas",ref:r,width:"320",height:"120",class:"border-2 border-gray-400 rounded bg-white"},null,512)]),e.createElementVNode("button",{onClick:C,class:"mb-4 text-sm text-blue-500 hover:text-blue-700 underline"}," 🔄 Can't read? Get a new image "),i.value?(e.openBlock(),e.createElementBlock("div",v,[...n[1]||(n[1]=[e.createElementVNode("p",{class:"text-4xl"},"✅",-1),e.createElementVNode("p",{class:"text-lg font-semibold text-green-600"},"Verification Successful!",-1)])])):(e.openBlock(),e.createElementBlock("div",V,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>c.value=u),type:"text",placeholder:"Enter the numbers you see",class:"w-full border-2 border-gray-300 p-3 rounded text-lg tracking-widest text-center",onKeyup:e.withKeys(M,["enter"])},null,544),[[e.vModelText,c.value]]),e.createElementVNode("button",{onClick:M,class:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors"}," ✓ Verify "),s.value?(e.openBlock(),e.createElementBlock("p",{key:0,class:e.normalizeClass([h.value,"mt-2 font-semibold"])},e.toDisplayString(s.value),3)):e.createCommentVNode("",!0)]))]))}},B={class:"p-4 text-center"},R={class:"flex justify-center mb-6"},T={key:0,class:"space-y-3"},P={class:"flex gap-2 justify-center mb-4"},$=["onClick"],D=["disabled"],G={key:1,class:"space-y-3"},I={class:"text-lg font-semibold text-green-600"},j={__name:"DiceGame",props:["onResult"],setup(y){const f=y,r=e.ref(null),c=e.ref(null),s=e.ref(null),h=e.ref(0),i=e.ref(!0),d=e.ref(""),k=e.ref(""),_=e.ref(!1),C=e.ref(null),M={1:[[.5,.5]],2:[[.3,.3],[.7,.7]],3:[[.3,.3],[.5,.5],[.7,.7]],4:[[.3,.3],[.7,.3],[.3,.7],[.7,.7]],5:[[.3,.3],[.7,.3],[.5,.5],[.3,.7],[.7,.7]],6:[[.3,.3],[.3,.5],[.3,.7],[.7,.3],[.7,.5],[.7,.7]]},t=(m,l=0,o=1)=>{const p=r.value,a=c.value,g=200*o;a.save(),a.translate(p.width/2,p.height/2),a.rotate(l),a.fillStyle="white",a.strokeStyle="#333",a.lineWidth=3,a.fillRect(-g/2,-g/2,g,g),a.strokeRect(-g/2,-g/2,g,g);const A=M[m];a.fillStyle="#333",A.forEach(([H,q])=>{const K=(H-.5)*g,Y=(q-.5)*g;a.beginPath(),a.arc(K,Y,8*o,0,Math.PI*2),a.fill()}),a.restore()},n=(m=0)=>{const l=r.value,o=c.value,p=o.createLinearGradient(0,0,l.width,l.height);p.addColorStop(0,"#e8eef5"),p.addColorStop(1,"#d0dce8"),o.fillStyle=p,o.fillRect(0,0,l.width,l.height),o.fillStyle="rgba(0, 0, 0, 0.1)",o.beginPath(),o.ellipse(l.width/2,l.height-30,100,20,0,0,Math.PI*2),o.fill();const a=Math.floor(Math.random()*6)+1;t(a,m,.9)},u=()=>{let m=0;const l=40,o=()=>{n(m/l*Math.PI*4),m++,m<l?C.value=requestAnimationFrame(o):(h.value=Math.floor(Math.random()*6)+1,t(h.value,0,.9),i.value=!1)};o()},E=m=>{i.value||(s.value=s.value===m?null:m)},x=()=>{if(s.value===null){d.value="❌ Please select a number",k.value="text-red-600";return}s.value===h.value?(_.value=!0,d.value="",setTimeout(()=>f.onResult(!0),1500)):(d.value=`❌ Wrong! It was ${h.value}. Rolling again...`,k.value="text-red-600",s.value=null,setTimeout(()=>{d.value="",i.value=!0,u()},1500))};return e.onMounted(()=>{c.value=r.value.getContext("2d"),u()}),(m,l)=>(e.openBlock(),e.createElementBlock("div",B,[l[1]||(l[1]=e.createElementVNode("h2",{class:"text-lg font-semibold mb-4"},"🎲 Dice Game",-1)),l[2]||(l[2]=e.createElementVNode("p",{class:"text-sm text-gray-600 mb-4"},"Watch the dice roll and guess the number",-1)),e.createElementVNode("div",R,[e.createElementVNode("canvas",{ref_key:"canvas",ref:r,width:"240",height:"240",class:"border-4 border-gray-400 rounded-lg bg-gradient-to-b from-gray-50 to-gray-100"},null,512)]),_.value?(e.openBlock(),e.createElementBlock("div",G,[l[0]||(l[0]=e.createElementVNode("p",{class:"text-5xl"},"✅",-1)),e.createElementVNode("p",I,"Correct! You guessed "+e.toDisplayString(h.value),1)])):(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",P,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,o=>e.createElementVNode("button",{key:o,onClick:p=>E(o),class:e.normalizeClass(["w-12 h-12 rounded-lg font-bold text-lg transition-all",s.value===o?"bg-blue-500 text-white scale-110 shadow-lg":"bg-gray-200 hover:bg-gray-300 text-gray-800"])},e.toDisplayString(o),11,$)),64))]),e.createElementVNode("button",{onClick:x,disabled:s.value===null,class:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white font-bold py-2 px-4 rounded-lg transition-colors"}," ✓ Submit Guess ",8,D),d.value?(e.openBlock(),e.createElementBlock("p",{key:0,class:e.normalizeClass([k.value,"mt-2 font-semibold text-sm"])},e.toDisplayString(d.value),3)):e.createCommentVNode("",!0)]))]))}},W={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},z={class:"bg-white rounded-2xl p-6 shadow-lg w-96 relative"},F={__name:"HumanVerifyModal",props:["onClose","onSuccess"],setup(y){const f=y,r=e.ref(!0),c=e.ref(null);e.onMounted(()=>{const i=[N,j],d=i[Math.floor(Math.random()*i.length)];c.value=d});const s=i=>{r.value=!1,f.onSuccess(i),f.onClose()},h=()=>{f.onSuccess(!1),f.onClose()};return(i,d)=>r.value?(e.openBlock(),e.createElementBlock("div",W,[e.createElementVNode("div",z,[e.createElementVNode("button",{onClick:h,class:"absolute top-2 right-3 text-gray-600"},"✖"),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.value),{onResult:s},null,32))])])):e.createCommentVNode("",!0)}};async function L(){return new Promise(y=>{const f=document.createElement("div");document.body.appendChild(f);const r=e.createApp({render:()=>e.h(F,{onClose:()=>{r.unmount(),document.body.removeChild(f)},onSuccess:c=>{y(c)}})});r.mount(f)})}b.verifyHuman=L,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})}));
